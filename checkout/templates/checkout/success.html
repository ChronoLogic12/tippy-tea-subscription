{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'checkout/css/checkout.css' %}">
{% endblock %}

{% block extra_title %}
- Checkout
{% endblock %}

{% block content %}
{% comment %} This code is heavily adapted from the stripe billing quickstart code found here
(https://stripe.com/docs/billing/quickstart) {% endcomment %}

<main class="main-container successful">
    <div class="container hero-container valign-wrapper">
        <div class="custom-card center-align">
            <div class="product Box-root">
                <div class="description Box-root">
                    <h5 class="center capitalise">Subscription to {{product.name}} plan successful!</h5>
                </div>
            </div>
            <form action="{% url 'customer-portal' %}" method="POST">
                <input type="hidden" id="session-id" name="session_id" value="" />
                <button class="button" id="checkout-and-portal-button" type="submit">Manage your billing
                    information</button>
            </form>
        </div>
    </div>
</main>

{% endblock %}

{% block extra_js %}
{{ block.super }}
<script src="https://polyfill.io/v3/polyfill.min.js?version=3.52.1&features=fetch"></script>
<script src="https://js.stripe.com/v3/"></script>
<script type="text/javascript" src="{% static 'checkout/js/checkout.js' %}">
</script>
{% endblock %}